<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Paiement réussi — Confirmation de commande</title>
  <meta name="description" content="Page de confirmation de paiement — récapitulatif de commande et actions disponibles (générer bon de commande / facture)" />

  <!-- Styles minimalistes et responsive -->
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --muted:#9aa4b2;
      --accent:#06b6d4;
      --success:#10b981;
      --glass: rgba(255,255,255,0.03);
      --radius:12px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      background:linear-gradient(180deg,#071027 0%, #041224 60%);
      color:#e6eef6;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      font-size:16px;
    }
    .container{
      width:100%;
      max-width:980px;
      background:linear-gradient(180deg,var(--card), #081223);
      border-radius:var(--radius);
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      padding:28px;
      display:grid;
      gap:20px;
      grid-template-columns: 1fr 360px;
      align-items:start;
    }
    header.success{
      grid-column:1/-1;
      display:flex;
      align-items:center;
      gap:18px;
    }
    .badge{
      display:inline-grid;
      place-items:center;
      width:68px;
      height:68px;
      border-radius:50%;
      background:linear-gradient(135deg,var(--success), #0ea97a);
      color:#032b1f;
      font-weight:700;
      box-shadow: 0 6px 18px rgba(8,120,88,0.16);
    }
    h1{margin:0;font-size:20px;letter-spacing: -0.2px}
    p.lead{margin:0;color:var(--muted);font-size:14px}
    /* left column */
    .summary{padding:18px;background:var(--glass);border-radius:10px}
    .meta{display:flex;flex-wrap:wrap;gap:12px;margin-top:12px}
    .meta-item{min-width:180px;background:rgba(255,255,255,0.02);padding:10px;border-radius:8px}
    .meta-item .k{display:block;color:var(--muted);font-size:12px}
    .meta-item .v{font-weight:600;margin-top:6px}
    table{
      width:100%;
      border-collapse:collapse;
      margin-top:14px;font-size:14px;
    }
    th,td{padding:10px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.03)}
    th{font-size:13px;color:var(--muted);font-weight:600}
    tfoot td{font-weight:700;font-size:15px}
    /* right column (aside) */
    aside.card{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
      padding:18px;border-radius:10px;
      border:1px solid rgba(255,255,255,0.02);
      height:fit-content;
    }
    .amount{font-size:24px;font-weight:800;margin:6px 0}
    .actions{display:flex;flex-direction:column;gap:10px;margin-top:14px}
    button{
      all:unset;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:12px 14px;
      border-radius:10px;
      font-weight:700;
      user-select:none;
    }
    button.primary{
      background:linear-gradient(90deg,var(--accent), #0ea5b7);
      color:#022025;
      box-shadow: 0 8px 18px rgba(6,182,212,0.12);
    }
    button.ghost{
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      color:var(--muted);
    }
    .muted{color:var(--muted);font-size:13px}
    .ref{font-family:monospace;color:#d1e7ee}
    .small{font-size:13px;color:var(--muted)}
    .status{
      display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(16,185,129,0.12);color:var(--success);font-weight:700;font-size:13px
    }
    /* responsive */
    @media (max-width:880px){
      .container{grid-template-columns:1fr; padding:18px}
      aside.card{order:3}
    }
  </style>
</head>
<body>
  <main class="container" role="main" aria-labelledby="title">
    <header class="success" role="banner">
      <div class="badge" aria-hidden="true">✓</div>
      <div>
        <h1 id="title">Paiement effectué avec succès</h1>
        <p class="lead">Merci — votre paiement a été validé. Ci-dessous le récapitulatif technique de la transaction.</p>
      </div>
      <div style="margin-left:auto;text-align:right">
        <div class="status" aria-live="polite">PAYÉ</div>
        <div class="small" style="margin-top:6px">Référence opération : <span class="ref" id="tx">TX-20251203-8A1F</span></div>
      </div>
    </header>

    <!-- colonne gauche : détails -->
    <section class="summary" aria-labelledby="summaryTitle">
      <h2 id="summaryTitle" style="font-size:16px;margin:0">Détails de la commande</h2>

      <div class="meta" role="list" aria-label="métadonnées">
        <div class="meta-item" role="listitem">
          <span class="k">Commande</span>
          <span class="v">CMD-2025-000345</span>
        </div>
        <div class="meta-item" role="listitem">
          <span class="k">Date & heure</span>
          <span class="v" id="date">3 déc. 2025 — 14:22:09 CET</span>
        </div>
        <div class="meta-item" role="listitem">
          <span class="k">Moyen de paiement</span>
          <span class="v">Carte bancaire • Visa</span>
        </div>
        <div class="meta-item" role="listitem">
          <span class="k">Transaction ID</span>
          <span class="v">8A1F-4C2B-0D9E</span>
        </div>
        <div class="meta-item" role="listitem">
          <span class="k">Client</span>
          <span class="v">Dupont, Jean</span>
        </div>
      </div>

      <!-- tableau items -->
      <table aria-describedby="items-desc">
        <caption id="items-desc" style="caption-side:top;text-align:left;font-weight:600;padding-bottom:8px;color:var(--muted)">Articles facturés</caption>
        <thead>
          <tr><th>Article</th><th>Réf</th><th>Qté</th><th>Prix unitaire</th><th>Montant</th></tr>
        </thead>
        <tbody>
          <tr><td>Module capteur X-200</td><td>HX-200</td><td>1</td><td>€1,250.00</td><td>€1,250.00</td></tr>
          <tr><td>Boîtier aluminium (usinage)</td><td>CASE-A1</td><td>1</td><td>€240.00</td><td>€240.00</td></tr>
          <tr><td>Frais logistiques</td><td>SHIP-STD</td><td>1</td><td>€12.00</td><td>€12.00</td></tr>
        </tbody>
        <tfoot>
          <tr><td colspan="4" style="text-align:right">Sous-total</td><td>€1,502.00</td></tr>
          <tr><td colspan="4" style="text-align:right">TVA (20%)</td><td>€300.40</td></tr>
          <tr><td colspan="4" style="text-align:right">Total payé</td><td>€1,802.40</td></tr>
        </tfoot>
      </table>

      <div style="margin-top:12px" class="small">
        Réglé via PSP externe — autorisation 3D Secure validée. Si vous avez besoin d'une trace comptable numérique, utilisez le bouton "Générer facture".
      </div>
    </section>

    <!-- colonne droite : résumé & actions -->
    <aside class="card" aria-labelledby="asideTitle">
      <h3 id="asideTitle" style="margin:0;font-size:15px">Récapitulatif & actions</h3>
      <div style="margin-top:10px">
        <div class="muted">Montant débité</div>
        <div class="amount">€1,802.40</div>
        <div class="muted">Moyen de paiement</div>
        <div class="small" style="margin-bottom:8px">Visa • **** 4242</div>

        <div class="muted">Adresse de facturation</div>
        <div class="small">Jean Dupont — 12 rue de l'Industrie, 75015 Paris, FR</div>

        <div class="actions" role="group" aria-label="Actions disponibles">
          <button id="gen-order" class="primary" type="button" aria-describedby="orderDesc">
            Générer bon de commande
          </button>
          <div id="orderDesc" class="small muted">Télécharger ou générer le bon de commande (PDF/JSON) — action non connectée.</div>

          <button id="gen-invoice" class="ghost" type="button" aria-describedby="invoiceDesc">
            Générer facture
          </button>
          <div id="invoiceDesc" class="small muted">Générer la facture fiscale PDF (format A4) — action non connectée.</div>
        </div>

        <div style="margin-top:12px" class="small muted">
          Transaction signée numériquement — algorithme de hachage SHA-256 (ID affiché). Conservez la référence pour réconciliation comptable.
        </div>
      </div>
    </aside>

    <footer style="grid-column:1/-1;display:flex;justify-content:space-between;align-items:center;padding-top:6px;border-top:1px dashed rgba(255,255,255,0.02);margin-top:6px">
      <div class="small muted">Besoin d'assistance ? support@example.com</div>
      <div class="small muted">Politique de remboursement : 14 jours | Référence commande <span class="ref">CMD-2025-000345</span></div>
    </footer>
  </main>

  <!-- Placeholder JS : points d'extension pour intégration backend -->
  <script>
    // IDs DOM pour intégration backend / hooks
    const btnOrder = document.getElementById('gen-order');
    const btnInvoice = document.getElementById('gen-invoice');

    // Payload minimal type-safe à envoyer au backend si nécessaire
    const payload = {
      orderId: 'CMD-2025-000345',
      transactionId: '8A1F-4C2B-0D9E',
      total: 1802.40,
      currency: 'EUR',
      items: [
        { sku: 'HX-200', name: 'Module capteur X-200', qty: 1, unit: 1250.00 },
        { sku: 'CASE-A1', name: 'Boîtier aluminium (usinage)', qty: 1, unit: 240.00 },
        { sku: 'SHIP-STD', name: 'Frais logistiques', qty: 1, unit: 12.00 }
      ]
    };

    // Hooks : pour l'instant logs ; à remplacer par fetch() vers ton API / génération PDF côté client
    btnOrder.addEventListener('click', () => {
      console.log('[HOOK] Générer bon de commande demandé', payload);
      // Ex : fetch('/api/generate-order', { method:'POST', body: JSON.stringify(payload) })
      alert('Action: Générer bon de commande — hook non implémenté. Voir console pour le payload.');
    });

    btnInvoice.addEventListener('click', () => {
      console.log('[HOOK] Générer facture demandé', payload);
      // Ex : fetch('/api/generate-invoice', { method:'POST', body: JSON.stringify(payload) })
      alert('Action: Générer facture — hook non implémenté. Voir console pour le payload.');
    });

    // Exemple de fonction utilitaire à intégrer côté client si tu veux générer un PDF simple via jsPDF (non incluse ici)
    // function generatePdfInvoice(payload) { /* ... */ }
  </script>
</body>
</html>
